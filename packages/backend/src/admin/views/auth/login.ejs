<!-- File: packages/backend/src/admin/views/auth/login.ejs -->

<%- contentFor('hideHeader', true) %>
<%- contentFor('hideSidebar', true) %>
<%- contentFor('hideFooter', true) %>

<div class="flex min-h-screen bg-gray-100">
  <!-- Left side with logo and information -->
  <div class="hidden lg:flex lg:flex-1 lg:flex-col lg:justify-center lg:bg-primary-700 lg:px-8">
    <div class="mx-auto max-w-md">
      <div class="text-white text-center mb-12">
        <h1 class="text-4xl font-extrabold mb-4">Gemstone System</h1>
        <p class="text-primary-200 text-xl">Administration Portal</p>
      </div>
      
      <div class="bg-primary-800 rounded-xl p-6 text-white shadow-lg mb-8">
        <h2 class="text-xl font-semibold mb-4">Welcome Back</h2>
        <p class="text-primary-200 mb-4">
          This secure portal provides administrative access to the Gemstone System. 
          Only authorized personnel should proceed.
        </p>
        
        <div class="mt-6">
          <div class="flex items-center mb-4">
            <div class="bg-primary-600 p-2 rounded-full mr-3">
              <i class="fas fa-shield-alt"></i>
            </div>
            <div>
              <h3 class="font-medium">Enhanced Security</h3>
              <p class="text-sm text-primary-300">Protected by multi-factor authentication</p>
            </div>
          </div>
          
          <div class="flex items-center mb-4">
            <div class="bg-primary-600 p-2 rounded-full mr-3">
              <i class="fas fa-chart-line"></i>
            </div>
            <div>
              <h3 class="font-medium">Complete Management</h3>
              <p class="text-sm text-primary-300">Manage users, data, and system settings</p>
            </div>
          </div>
          
          <div class="flex items-center">
            <div class="bg-primary-600 p-2 rounded-full mr-3">
              <i class="fas fa-tachometer-alt"></i>
            </div>
            <div>
              <h3 class="font-medium">Real-time Analytics</h3>
              <p class="text-sm text-primary-300">Monitor system performance and user activity</p>
            </div>
          </div>
        </div>
      </div>
      
      <div class="text-center text-primary-300 text-sm">
        <p>&copy; <%= new Date().getFullYear() %> Gemstone System</p>
        <p>All rights reserved</p>
      </div>
    </div>
  </div>
  
  <!-- Right side with login form -->
  <div class="flex flex-1 flex-col justify-center py-12 px-4 sm:px-6 lg:px-8">
    <div class="mx-auto w-full max-w-sm lg:max-w-md">
      <!-- Mobile logo (only visible on small screens) -->
      <div class="text-center mb-8 lg:hidden">
        <h1 class="text-3xl font-bold text-primary-600">Gemstone System</h1>
        <p class="text-gray-600">Administration Portal</p>
      </div>
      
      <div class="bg-white p-8 rounded-lg shadow-md">
        <div class="text-center mb-6">
          <h2 class="text-2xl font-bold text-gray-900">Admin Login</h2>
          <p class="text-sm text-gray-600 mt-1">Sign in to access the admin dashboard</p>
        </div>
        
        <% if (typeof error !== 'undefined' && error) { %>
          <div class="bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6" role="alert">
            <p><%= error %></p>
          </div>
        <% } %>
        
        <% if (typeof success !== 'undefined' && success) { %>
          <div class="bg-green-100 border-l-4 border-green-500 text-green-700 p-4 mb-6" role="alert">
            <p><%= success %></p>
          </div>
        <% } %>
        
        <form class="space-y-6" action="/admin/auth/login" method="POST">
          <div>
            <label for="email" class="block text-sm font-medium text-gray-700">Email address</label>
            <div class="mt-1">
              <input id="email" name="email" type="email" required autocomplete="email" 
                     class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 
                     focus:outline-none focus:ring-primary-500 focus:border-primary-500">
            </div>
          </div>
          
          <div>
            <label for="password" class="block text-sm font-medium text-gray-700">Password</label>
            <div class="mt-1 relative">
              <input id="password" name="password" type="password" required autocomplete="current-password" 
                     class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 
                     focus:outline-none focus:ring-primary-500 focus:border-primary-500">
              <button type="button" id="togglePassword" class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600">
                <i class="fas fa-eye"></i>
              </button>
            </div>
          </div>
          
          <div class="flex items-center justify-between">
            <div class="flex items-center">
              <input id="remember-me" name="remember-me" type="checkbox" 
                     class="h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded">
              <label for="remember-me" class="ml-2 block text-sm text-gray-700">
                Remember me
              </label>
            </div>
            
            <!-- Future feature: Password reset -->
            <div class="text-sm">
              <span class="text-gray-500 cursor-not-allowed">
                Forgot your password?
              </span>
            </div>
          </div>
          
          <div>
            <button type="submit" 
                    class="group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500">
              <span class="absolute left-0 inset-y-0 flex items-center pl-3">
                <i class="fas fa-lock text-primary-500 group-hover:text-primary-400"></i>
              </span>
              Sign in
            </button>
          </div>
        </form>
      </div>
      
      <div class="mt-6 text-center text-sm">
        <div class="flex justify-center space-x-4 mb-3">
          <a href="/" class="text-gray-600 hover:text-gray-900">
            <i class="fas fa-home mr-1"></i> Main Site
          </a>
          <span class="text-gray-400">|</span>
          <a href="#" class="text-gray-600 hover:text-gray-900">
            <i class="fas fa-question-circle mr-1"></i> Help
          </a>
        </div>
        <p class="text-gray-500 lg:hidden">
          &copy; <%= new Date().getFullYear() %> Gemstone System
        </p>
      </div>
    </div>
  </div>
</div>

<%- contentFor('scripts') %>
<script>
  // Toggle password visibility
  document.addEventListener('DOMContentLoaded', function() {
    const togglePassword = document.getElementById('togglePassword');
    const password = document.getElementById('password');
    
    togglePassword.addEventListener('click', function() {
      // Toggle the type attribute
      const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
      password.setAttribute('type', type);
      
      // Toggle the icon
      this.querySelector('i').classList.toggle('fa-eye');
      this.querySelector('i').classList.toggle('fa-eye-slash');
    });
    
    // Prevent form submission when pressing Enter in the password field
    // if the remember-me checkbox is focused
    const rememberMeCheckbox = document.getElementById('remember-me');
    rememberMeCheckbox.addEventListener('keydown', function(e) {
      if (e.key === 'Enter') {
        e.preventDefault();
        document.querySelector('form').submit();
      }
    });
  });
</script>